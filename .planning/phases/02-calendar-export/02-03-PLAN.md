---
phase: 02-calendar-export
plan: 03
type: execute
wave: 2
depends_on:
  - 02-calendar-export-01
  - 02-calendar-export-02
files_modified:
  - internal/view/study.go
autonomous: true
requirements:
  - ICAL-01
  - ICAL-02
  - ICAL-03
  - AREM-01
user_setup: []

must_haves:
  truths:
    - "User can trigger ICS export from Study Plan view and see export result path"
    - "User can trigger Apple Reminders export from Study Plan view and see success/failure feedback"
    - "Calendar export flow in Phase 2 does not introduce Google API integration"
  artifacts:
    - path: "internal/view/study.go"
      provides: "Study view keybindings, command dispatch, and status rendering for both exports"
  key_links:
    - from: "internal/view/study.go"
      to: "internal/services/export_ics.go"
      via: "export command for ICS"
      pattern: "ExportICS"
    - from: "internal/view/study.go"
      to: "internal/services/export_reminders.go"
      via: "export command for reminders"
      pattern: "ExportAppleReminders"
---

<objective>
Wire the new export services into the Study Plan UX so users can execute ICS and Apple Reminders exports directly from the existing TUI flow.

Purpose: Complete the end-user phase outcome by connecting service-layer exporters to actionable keyboard interactions and clear feedback states.
Output: Updated Study view with export commands, status messaging, and help text for both export paths.
</objective>

<execution_context>
@/Users/tommy/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/tommy/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-calendar-export/02-RESEARCH.md
@internal/view/study.go
@internal/tui/tui.go
@.planning/phases/02-calendar-export/02-01-PLAN.md
@.planning/phases/02-calendar-export/02-02-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Add Study view export actions and command wiring</name>
  <files>internal/view/study.go</files>
  <action>
    Extend Study view key handling with explicit export actions (for example `e` for ICS and `r` for Apple Reminders) while preserving existing navigation and task toggling behavior.
    Call the Phase 2 exporters from async Bubble Tea commands so export work does not block UI input.
    Use existing study task dataset as the source and reject export with a clear message when there are zero tasks.
    Keep scope limited to ICS + Apple Reminders only; do not add Google API or OAuth logic in this phase.
  </action>
  <verify>
    <automated>go test ./... && go build ./...</automated>
  </verify>
  <done>Study view can invoke both exporters via keyboard without breaking current study plan interactions.</done>
</task>

<task type="auto">
  <name>Render export status and update in-view guidance</name>
  <files>internal/view/study.go</files>
  <action>
    Add status fields/messages to display last export result (success path, output path/count, and actionable error text).
    Update footer/help copy in Study view to show new export keys and outcomes clearly.
    Include result messaging aligned with Phase 2 compatibility goals (ICS path for import, reminder count/list target).
  </action>
  <verify>
    <automated>go test ./... && go build ./...</automated>
    <manual>Run app, generate tasks, press export keys, and verify Study screen shows success/failure state and output path details.</manual>
  </verify>
  <done>Users get immediate, clear feedback for both export flows directly in Study view.</done>
</task>

</tasks>

<verification>
- `go test ./...` and `go build ./...` pass
- Study view exposes keyboard actions for both ICS and Apple Reminders exports
- Manual smoke check confirms exported `.ics` is importable and reminders are created when permissions allow
</verification>

<success_criteria>
- [ ] User can export to `.ics` from Study view and receive output path feedback
- [ ] User can create Apple Reminders from Study view and receive count/error feedback
- [ ] Phase 2 remains scoped to `ICAL-*` + `AREM-01` only (no Google API integration)
</success_criteria>

<output>
After completion, create `.planning/phases/02-calendar-export/02-03-SUMMARY.md`
</output>
